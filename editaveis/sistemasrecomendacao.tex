\chapter[Sistemas de recomendação]{Sistemas de recomendação}

Sistemas de recomendação são ferramentas computacionais e técnicas usadas para
produzir recomendação de itens úteis a um usuário \cite{mahmood2009improving}.
Sendo assim, um sistema de recomendação pode ser usado em diversos contextos,
desde melhorar a experiência de usuário a até mesmo melhorar a taxa de vendas
em uma aplicação comercial. Além disso, um sistema de recomendação também pode
ser usado para recomendar uma grande gama de itens, como filmes e livros
\cite{ricci2011introduction}. Para realizar a tarefa de recomendação, duas abordagens distintas podem ser usadas,
recomendação não-personalizadas e personalizadas.

Recomendações não-personalizadas são aquelas que não usam nenhuma informação do
usuário para realizar a recomendação. Exemplo de estratégias assim podem ser
visto em sites de música que apresentam a lista das 10 músicas mais
ouvidas. Já recomendações personalizadas são aquelas que usam as avaliações já
realizadas por um usuário sobre um item para criar uma função preditiva que irá avaliar itens que ainda não foram
avaliados pelo usuário e então recomendar aqueles que possuem maior valor
apresentado pela função preditiva. A Figura \ref{fig:modelo_recomendacao} mostra
o processo para realizar uma recomendação personalizada.

\begin{figure}[h]
  \centering
  \includegraphics[width=0.9\textwidth]{figuras/recommender_model.eps}
  \caption{Modelo para criação de um sistema de recomendação personalizado \cite{picault2011get}}
  \label{fig:modelo_recomendacao}
\end{figure}

Pode-se ver na Figura \ref{fig:modelo_recomendacao} que as principais entradas
para um sistema de recomendação são os usuários do mesmo e os dados relacionados
a este mesmo usuário. No que tange o sistema de recomendação em si, pode-se
observar fatores importantes no design do mesmo, como o perfil do usuário, o
algoritmo de recomendação ou estratégia a ser usada e a infra-estrura a ser
usada. Além disso, nenhum sistema de recomendação está imune do contexto no qual
o mesmo será usado.

Vale considerar que o perfil do usuário e a estratégia de recomendação usadas
são bastante dependentes um do outro. O perfil do usuário é a forma como o
usuário será representado no sistema, podendo ser gerado de inúmeras maneira,
como uma lista de itens avaliados por exemplo. Sendo assim, características dos itens,
números de itens avaliados e a forma como o perfil do usuário é modelado são aspectos
fundamentais para a seleção de uma estratégia de recomendação, pois dependendo
da configuração desses atributos, algumas estratégias
de recomendação devem ser descartadas \cite{picault2011get}.

\section{Estratégias de recomendação}

Com o conjunto de dados definidos, pode-se então escolher uma estratégia de
recomendação adequada. Para agrupar tais estratégias, considerou-se taxinomia de
alguns autores, como por exemplo \cite{burke2007hybrid}. As recomendações
descritas a seguir foram as que se mostraram mais presentes nas taxinomias
estudadas.

\begin{itemize}
    \item \textbf{Estratégias baseadas em conteúdo: } São aquelas que buscam
        recomendar itens similares ao que usuário já avaliou. A similiraridade
        dos itens é estimada pelos atributos que compõem um dado item no
        sistema. O fluxo de uma estratégia baseada em conteúdo pode ser vista na
        Figura \ref{fig:recomendacao_conteudo}.

        \begin{figure}[h]
            \centering
            \includegraphics[width=0.9\textwidth]{figuras/recomendacao_conteudo}
            \caption{Fluxo para construção de um sistema de recomendação por
            conteúdo \cite{lops2011content}}
            \label{fig:recomendacao_conteudo}
        \end{figure}

        Pode-se ver pela Figura \ref{fig:recomendacao_conteudo} que uma recomendação
        por conteúdo se baseia fortemente em alguns itens chave. O
        \textit{Content Analyser} é a parte do sistema de recomendação que
        transforma os itens avaliados pelo usuário em entradas válidas pelo
        algoritmo, ou seja, seleciona os atributos escolhidos do mesmo. O
        \textit{Profile Learner} é o responsável por criar o perfil do
        usuário, analisando os dados filtrados pelo \textit{Content Analyser} e
        criando um perfil de acordo com um modelo definido definido arquiteto do
        sistema de recomendação. Uma técnica normalmente aplicada para essa tarefa
        é a do uso do \textit{Term Frequency-Inverse Term Frequency (TFIDF)}
        para selecionar os atributos de maior impacto nos itens avaliados pelo
        usuário, e então compor o perfil do usuário com tais termos
        \cite{lops2011content}. Por fim, o \textit{Filtering compenent} nada mais é do que uma
        ferramenta que recebe o perfil do usuário como entrada e usa o mesmo
        para filtrar os melhores itens que se aproximam desse perfil da base de
        dados possível. Sendo assim, a função preditiva desta estratégia de
        recomendação é uma combinação do perfil de usuário juntamente com uma
        forma de avaliar a similaridade entre dois itens.

        Dado essas características da recomendação baseada por conteúdo, pode-se
        perceber que a mesma pode sofrer o problema de superespecialização, pois
        a mesma pode ter dificuldades em classificar itens que nunca foram
        usados pelo usuário e também recomendar apenas itens próximos ao atual
        perfil do mesmo, dificultando assim a recomendação que podem vir a se
        tornar uma surpresa para o usuário. \cite{lops2011content}.

    \item \textbf{Estratégias colaborativas:} Estratégias que recomendam itens
        de usuários com avaliações similares aos itens avaliados pelo usuário
        que está usando o sistema \cite{schafer2007collaborative}.
        Para determinar a similaridade de um usuário a outro, as avaliações de
        ambos são comparadas, visando assim encontrar usuários próximos um do
        outro. Uma vez definido a vizinhança do usuário, a recomendação de um
        item é normalmente feita por selecionar itens mais presentes no perfil
        dos vizinhos \cite{araujo2011apprecommender}. Vale ressaltar que este tipo de recomendação é uma das mais
        populares quando se trata de sistemas de recomendação
        \cite{ricci2011introduction}.

        Entretanto, vale dizer que esse tipo de estratégia necessita fortemente
        de uma ampla base de usuários para que a mesma possa ser aplicada. Isso
        se dá pela necessidade de criar uma vizinhança significativa de usuários
        com gostos similiares. Sendo assim, para aplicações que não possuem uma
        base de usuário relacionados ou até mesmo tratam do seu usuário de forma
        isolada, tal estratégia pode se mostrar bastante complicada de
        implementar. Além disso, outro problema é que essa estratégia tem um
        grande problema para recomendar itens que não possuem avaliações por
        nenhum usuário, o que dependendo da motivação usada para criar o sistema
        de recomendação, pode vir a se tornar um problema.
        \cite{ricci2011introduction}.


    \item \textbf{Estratégias híbridas: } Estratégias que combinam uma ou mais
        estratégias para gerarem uma recomendação. Normalmente tais estratégias
        são combinadas para que os pontos fracos de uma estratégia seja
        suavizada pela outra. Por exemplo, combinar estratégias colaborativas com
        baseadas em conteúdo pode resolver problemas de superespecialização
        gerados por estratégias baseadas em conteúdo e também resolver problemas
        de recomendação de itens que ainda não foram avaliados, o que não
        acontece em recomendações baseadas em conteúdo.

\end{itemize}


\section{Contexto em sistemas de recomendação}

Apesar de os modelos apresentados na seção \ref{sec:estrategias_recomendacao}
serem bastante distintos um do outro, cada um deles pode usar algumas
abordagens diferenciadas para tornar o perfil do usuário mais próximo a
realidade. Para isso, Uma abordagem que pode ser usado é a de recomendação
baseada em contexto. Para esta recomendação, os itens avaliados pelo usuário são
combinados com informações de contexto do próprio usuário. Segundo \cite{berry1997data},
contexto pode ser definido como uma informação que caracteriza os estágios de
vida de um usuário e que pode determinar mudanças de preferências e status
do mesmo. Informações de contexto podem ser obtidas de forma implícita ou até
mesmo serem subentendidas pelo sistema, podendo assim gerar novos atributos
interessantes para o perfil do usuário. Um exemplo de informação contextual é a
quanto tempo um usuário realizou a avaliação de um item. Um sistema de
recomendação pode usar essa informação para priorizar avaliações mais recentes
do que mais antigas, visando manter um perfil mais atualizado do usuário.

Sendo assim, para adicionar informação contextual em um sistema de recomendação
personalizado, três abordagens distintas são propostas por
\citeonline{adomavicius2011context}:

\begin{itemize}
    \item \textbf{Pré-filtragem: } As informações que serão usadas
        para realizar uma recomendação são pré-filtradas por informações de
        contexto antes de alimentarem o sistema de recomendação. Um exemplo
        dessa abordagem pode ser quando um sistema de recomendação só deseja
        receber as avaliações mais recentes do usuário, usando informação
        temporal de contexto para filtrar itens avaliados a muito tempo.
    \item \textbf{filtragem pós recomendação: } Após uma recomendação ter sido
        executada, os itens recomendados são filtrados por informações
        contextuais. Como por exemplo, supondo que um usuário esteja procurando
        sugestões de restaurantes, o sistema pode fazer essa sugestão e usar a
        localização do usuário para retirar restaurantes muito longes da sua
        localização atual.
    \item \textbf{Modelagem contextual: } As informações contextuais são usadas
        para modelar o perfil do usuário ou até mesmo afetar como o perfil do
        usuário será criado.
\end{itemize}

\section{Avaliação de recomendadores}

Para avaliar um sistema de recomendação, duas abordagens distintas podem ser
usadas \cite{herlocker2004evaluating}:

\begin{itemize}
    \item \textbf{Experimentos offline: } Experimentos que usam uma base de
        dados previamente coletada para serem executados.
    \item \textbf{Experimentos com usuário: } Experimentos onde o usuário
        interage com o sistema de recomendação com algum propósito específico.
\end{itemize}

Vale ressaltar que cada um dos experimentos tem papéis bem definidos. Sendo
assim necessário compreeender o porquê do seu uso para avaliar sistemas de
recomendação.

\subsection{Experimentos offline}

Experimentos offline tem normalmente a intenção de avaliar aspectos como à
acurácia e cobertura de um sistema de recomendação. Normalmente, os itens
avaliados pelo usuário são divididos em dois grupos, aprendizado e teste. Os
itens marcados como aprendizado são usados para popular o sistema de
recomendação. Já os itens marcados como teste são usados para avaliar se o
sistema de recomendação conseguiu recomendar algum deles. Sendo assim, os itens
podem cair em quatro categorias distintas:

\begin{itemize}
    \item \textbf{Verdadeiro positivos: } Item recomendado pelo sistema e
        presente nos dados de teste.
    \item \textbf{Falso positivos: } Item não recomendado, mas presente no dados
        de teste.
    \item \textbf{Verdadeiros negativos: } Item recomendado e não presente
        nos dados de teste.
    \item \textbf{Falso negativos: } Item não recomendado e não presente nos
        dados de teste.
\end{itemize}

Uma estratégia normalmente usada para comparar possíveis estratégias de
recomendação são as curvas ROC. Tais curvas analisam a frequência de valores
verdadeiros positivos \textit{(TPR)} sobre a frequência de valores falso
positivos \textit{(FPR)}. A Figura
\ref{fig:curva_roc} mostra o comportamento típico de uma curva ROC.

\begin{figure}[h]
  \centering
  \includegraphics[width=0.9\textwidth]{figuras/curva_roc.eps}
  \caption{}
  \label{fig:curva_roc}
\end{figure}

Conforme pode ser visto na Figura \ref{fig:curva_roc}, a taxa de verdadeiros
positivos se encontra no eixo das ordenadas e o de falso positivo, nas
abcissas. Pode-se ver também alguns pontos informativos. O primeiro desses
pontos é o (0, 0), que representa uma recomendação sem resultados positivos nem
negativos. O segundo ponto, (0, 1) representa um recomendação perfeita, sem
resultados negativos, o que seria o contrário do ponto (1, 0). Por fim, o ponto
(1,1) representa recomendações que marcaram todas os itens como positivos. Além
disso, pode-se ver que um recomendador com comportamento aleatório, se
encontraria em na diagonal ascendente de (0, 0) até (0, 1). Dessa forma, um
recomendador perfeito deve subir até o eixo das abcissas ao ponto (0, 1) e
seguir horizontalmente até o ponto (1, 1) \cite{araujo2011apprecommender}.

Consideranto que vários exemplos são produzidos para gerar uma curva ROC, uma
boa forma de comparar modelos é usando a métrica AUC \textit{(Area Under
Curve)}. Segundo \cite{herlocker2004evaluating}, se duas recomendações forem
aleatoriamente escolhidas, sendo uma positiva e outra considerada negativa, o
AUC irá ser numericamente igual a probabilidade do sistema positivo ser melhor
pontuado que a recomendação negativa, o que se encaixa perfeitamente para
comparação entre diferentes estratégias de recomendação.

\subsection{Experimentos com usuário}

Para experimentos com usuários, um conjunto de usuários é selecionado, visando
com que os mesmos interejam com o sistema, e sejam capazes de responder algumas
questões objetivas e até mesmo subjetivas quanto ao processo de recomendação e
os próprios itens sendo recomendados.

Entretanto, vale ressaltar que este tipo de experimento apresenta algumas
dificuldades. A primeira delas está no custo de se fazer um experimento dessa
forma, pois além de fatores como seleção de usuário e isolar um ambiente de
teste, tornar tais experimentos repetíveis pode-se tornar bastante complexo
\cite{shani2011evaluating}. Além disso, é importante também não informar o
objetivo do experimento ao usuário, pois tal informação pode levar ao usuário a
se comportar de uma forma diferente, podendo assim gerar resultados
comprometidos.

Por fim, este tipo de experimento também permite coletar diversos dados sobre
como o usuário utiliza a aplicação, além de poder prover dados qualitativos
sobre a própria recomendação, podendo assim responder uma gama bem maior de
questão do que os experimentos offline.
